<div *ngIf="transaction">

  <mat-card>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>Hash</div>
      <div class="hex">{{transaction.hash}}</div>
    </div>
    <mat-divider></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>From</div>
      <a class="hex" [routerLink]="'/address/'+transaction.from">{{transaction.from}}</a>
    </div>
    <mat-divider></mat-divider>
    <div *ngIf="transaction.details?.contract_metadata">
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Calls Contract</div>
        <a class="hex" [routerLink]="'/address/'+transaction.to">{{transaction.details.contract_metadata.name}}</a>
      </div>
      <mat-divider></mat-divider>
      <div *ngIf="transaction.details?.type=='token_transfer'">
        <div fxLayout="row" fxLayoutAlign="space-between begin">
          <div>Type</div>
          <div>Token Transfer</div>
        </div>
        <mat-divider></mat-divider>
        <div fxLayout="row" fxLayoutAlign="space-between begin">
          <div>To</div>
          <a class="hex" [routerLink]="'/address/'+transaction.details.metadata.to">{{transaction.details.metadata.to}}</a>
        </div>
        <mat-divider></mat-divider>
        <div fxLayout="row" fxLayoutAlign="space-between begin">
          <div>Transfer Value</div>
          <div>{{ transaction.details.metadata.value | formatValue : transaction.details.metadata.decimals : transaction.details.metadata.symbol }}</div>
        </div>
        <mat-divider></mat-divider>
      </div>
    </div>
    <div *ngIf="!transaction.details?.contract_metadata">
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>To</div>
        <a class="hex" [routerLink]="'/address/'+transaction.to">{{transaction.to}}</a>
      </div>
      <mat-divider></mat-divider>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>Value</div>
      <div>{{transaction.value/1E18|currency: ' ' : undefined: '0.0-18'}} ETP</div>
    </div>
    <mat-divider></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>Gas Limit</div>
      <div>{{transaction.gas}}</div>
    </div>
    <mat-divider></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>Gas Price</div>
      <div>{{transaction.gasPrice/1E10|currency: ' ' : undefined: '0.0-18'}} sats</div>
    </div>
    <mat-divider></mat-divider>
    <div *ngIf="transaction.details" fxLayout="row">
      <div fxFlex="20">Contract Call</div>
      <div fxFlex="80" fxLayout="row" fxLayoutAlign="space-between begin">
        <p style="text-align: left;">
          {{transaction.details.call.name}}
        </p>
        <div>
          <span *ngFor="let input of transaction.details.call.inputs">
            {{input.name}}: {{input.value}}<br>
          </span>
        </div>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div *ngIf="transaction.input!=='0x'&&!transaction.creates" fxLayout="row" fxLayoutAlign="space-between begin">
      <div fxFlex="20">Data</div>
      <div>
        <p class="hex contract">{{transaction.input}}</p>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between begin">
      <div>Nonce</div>
      <div>{{transaction.nonce}}</div>
    </div>
  </mat-card>

  <div *ngIf="transaction.creates">
    <h2>Contract Bytecode</h2>
    <mat-card>
      <mat-card-content class="hex contract">
        {{transaction.input}}
      </mat-card-content>
    </mat-card>
  </div>

  <h2>Confirmation Details</h2>

  <div *ngIf="transaction.receipt as receipt">
    <mat-card>
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Confirmation Time</div>
        {{transaction.confirmedAt * 1000 | date : 'medium'}}
      </div>
      <mat-divider></mat-divider>
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Block Height</div>
        <a [routerLink]="'/block/'+receipt.blockNumber">{{receipt.blockNumber}}</a>
      </div>
      <mat-divider></mat-divider>
      <div *ngIf="receipt.contractAddress" fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Created Contract</div>
        <a class="hex" [routerLink]="'/address/'+receipt.contractAddress">{{receipt.contractAddress}}</a>
      </div>
      <mat-divider></mat-divider>
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Successful</div>
        <div>{{receipt.status}}</div>
      </div>
      <mat-divider></mat-divider>
      <div fxLayout="row" fxLayoutAlign="space-between begin">
        <div>Gas Used</div>
        <div>{{receipt.gasUsed}}</div>
      </div>
    </mat-card>
    <h2>Logs</h2>
    <p *ngIf="receipt.logs.length===0">This transaction triggered no events</p>
    <div *ngFor="let log of (transaction?.details?.logs || receipt.logs)">
      <div style="margin-bottom: 25px;">
        <app-log [log]="log"></app-log>
      </div>
    </div>
  </div>

</div>
